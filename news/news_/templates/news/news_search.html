{% extends 'base.html' %}

{% block title %}Поиск новостей{% endblock %}

{% block content %}
<h1>Поиск новостей</h1>

<form method="get">
  {{ filter.form.as_p }}
  <button type="submit">Искать</button>
</form>

<ul>
  {% for news in filter.qs %}
    <li><strong>{{ news.title }}</strong> — {{ news.user.__username }} — {{ news.created_at|date:"d.m.Y" }}</li>
  {% empty %}
    <li>Новостей не найдено.</li>
  {% endfor %}
</ul>

{% if filter.qs.paginator.num_pages > 1 %}
  <div class="pagination">
    {% if filter.qs.has_previous %}
      <a href="?page=1">Первая</a>
      <a href="?page={{ filter.qs.previous_page_number }}">Назад</a>
    {% endif %}

    {% for num in filter.qs.paginator.page_range %}
      {% if num == filter.qs.number %}
        <strong>{{ num }}</strong>
      {% else %}
        <a href="?page={{ num }}">{{ num }}</a>
      {% endif %}
    {% endfor %}

    {% if filter.qs.has_next %}
      <a href="?page={{ filter.qs.next_page_number }}">Вперёд</a>
      <a href="?page={{ filter.qs.paginator.num_pages }}">Последняя</a>
    {% endif %}
  </div>
{% endif %}
{% endblock %}